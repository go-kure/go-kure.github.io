<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.2">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Kurel Package System — Design Specification This document describes the structure, behavior, and purpose of a Kurel package (Kubernetes Resources Launcher), which encapsulates a reusable, versionable application for Kubernetes. Kurel builds on Kure’s patch engine to enable declarative configuration of application instances without templates or overlays.
Goals Enable reusable packaging of Kubernetes applications Declarative customization via parameters &#43; patches No Helm-style templating or Kustomize overlays Strong schema validation and deployment safety Compatible with GitOps workflows (Flux/ArgoCD) Multi-namespace and multi-phase deployment support Design Philosophy “Kurel just generates YAML” - Kurel is a declarative system for generating Kubernetes manifests with validation and customization capabilities. It is not a runtime system, orchestrator, or complex package manager.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Kurel Package System — Design Specification This document describes the structure, behavior, and purpose of a Kurel package (Kubernetes Resources Launcher), which encapsulates a reusable, versionable application for Kubernetes. Kurel builds on Kure’s patch engine to enable declarative configuration of application instances without templates or overlays.
Goals Enable reusable packaging of Kubernetes applications Declarative customization via parameters &#43; patches No Helm-style templating or Kustomize overlays Strong schema validation and deployment safety Compatible with GitOps workflows (Flux/ArgoCD) Multi-namespace and multi-phase deployment support Design Philosophy “Kurel just generates YAML” - Kurel is a declarative system for generating Kubernetes manifests with validation and customization capabilities. It is not a runtime system, orchestrator, or complex package manager.">
    <meta property="og:url" content="http://localhost:1313/packages/launcher/design/index.html">
    <meta property="og:site_name" content="Go Kure">
    <meta property="og:description" content="Kurel Package System — Design Specification This document describes the structure, behavior, and purpose of a Kurel package (Kubernetes Resources Launcher), which encapsulates a reusable, versionable application for Kubernetes. Kurel builds on Kure’s patch engine to enable declarative configuration of application instances without templates or overlays.
Goals Enable reusable packaging of Kubernetes applications Declarative customization via parameters &#43; patches No Helm-style templating or Kustomize overlays Strong schema validation and deployment safety Compatible with GitOps workflows (Flux/ArgoCD) Multi-namespace and multi-phase deployment support Design Philosophy “Kurel just generates YAML” - Kurel is a declarative system for generating Kubernetes manifests with validation and customization capabilities. It is not a runtime system, orchestrator, or complex package manager.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Packages">
    <meta itemprop="description" content="Kurel Package System — Design Specification This document describes the structure, behavior, and purpose of a Kurel package (Kubernetes Resources Launcher), which encapsulates a reusable, versionable application for Kubernetes. Kurel builds on Kure’s patch engine to enable declarative configuration of application instances without templates or overlays.
Goals Enable reusable packaging of Kubernetes applications Declarative customization via parameters &#43; patches No Helm-style templating or Kustomize overlays Strong schema validation and deployment safety Compatible with GitOps workflows (Flux/ArgoCD) Multi-namespace and multi-phase deployment support Design Philosophy “Kurel just generates YAML” - Kurel is a declarative system for generating Kubernetes manifests with validation and customization capabilities. It is not a runtime system, orchestrator, or complex package manager.">
    <meta itemprop="wordCount" content="954">
    <title></title>
    <link href="/css/auto-complete/auto-complete.min.css?1754430541" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1754430541" defer></script>
    <script src="/js/search-lunr.js?1754430541" defer></script>
    <script src="/js/search.js?1754430541" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1754430541";
    </script>
    <script src="/js/lunr/lunr.min.js?1754430541" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1754430541" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1754430541" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1754430541" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1754430541" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1754430541" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1754430541" rel="stylesheet">
    <link href="/css/theme.css?1754430541" rel="stylesheet">
    <link href="/css/format-html.css?1754430541" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/packages\/launcher\/design\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><div class="notices warning" style="margin-bottom: 1rem;">
    <div class="label">⚠️ Work in Progress</div>
    <div class="content">Kure is currently under active development and has not been released yet. APIs and features are subject to change.</div>
</div>
  </head>
  <body class="mobile-support html" data-url="/packages/launcher/design/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#goals">Goals</a></li>
    <li><a href="#design-philosophy">Design Philosophy</a>
      <ul>
        <li><a href="#core-principles">Core Principles</a></li>
      </ul>
    </li>
    <li><a href="#package-directory-structure">Package Directory Structure</a></li>
    <li><a href="#core-concepts">Core Concepts</a>
      <ul>
        <li><a href="#1-parametersyaml---variables-and-metadata">1. <strong>parameters.yaml</strong> - Variables and Metadata</a></li>
        <li><a href="#2-resources---base-kubernetes-manifests">2. <strong>resources/</strong> - Base Kubernetes Manifests</a></li>
        <li><a href="#3-patches---modular-patch-system">3. <strong>patches/</strong> - Modular Patch System</a></li>
        <li><a href="#4-gitops-deployment-phases">4. <strong>GitOps Deployment Phases</strong></a></li>
        <li><a href="#5-schema-generation-and-validation">5. <strong>Schema Generation and Validation</strong></a></li>
        <li><a href="#6-user-extensions-localkurel">6. <strong>User Extensions (.local.kurel)</strong></a></li>
      </ul>
    </li>
    <li><a href="#variable-system">Variable System</a>
      <ul>
        <li><a href="#variable-reference-syntax">Variable Reference Syntax</a></li>
        <li><a href="#variable-resolution">Variable Resolution</a></li>
        <li><a href="#fixed-top-level-keys">Fixed Top-Level Keys</a></li>
      </ul>
    </li>
    <li><a href="#patch-system">Patch System</a>
      <ul>
        <li><a href="#patch-discovery-and-ordering">Patch Discovery and Ordering</a></li>
        <li><a href="#conditional-patch-enabling">Conditional Patch Enabling</a></li>
        <li><a href="#patch-processing-flow">Patch Processing Flow</a></li>
      </ul>
    </li>
    <li><a href="#multi-namespace-support">Multi-Namespace Support</a>
      <ul>
        <li><a href="#flexible-namespace-handling">Flexible Namespace Handling</a></li>
        <li><a href="#namespace-creation-pattern">Namespace Creation Pattern</a></li>
      </ul>
    </li>
    <li><a href="#build-and-validation">Build and Validation</a>
      <ul>
        <li><a href="#cli-commands">CLI Commands</a></li>
        <li><a href="#generated-output-structure">Generated Output Structure</a></li>
      </ul>
    </li>
    <li><a href="#design-constraints">Design Constraints</a></li>
    <li><a href="#use-cases">Use Cases</a></li>
    <li><a href="#future-extensions">Future Extensions</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">Go Kure</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/packages/index.html"><span itemprop="name">Packages</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/packages/launcher/index.html"><span itemprop="name">Launcher Package</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/packages/launcher/index.html" title="Launcher Package (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/packages/patch/index.html" title="Patch Package (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable packages" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h1 id="kurel-package-system--design-specification">Kurel Package System — Design Specification</h1>
<p>This document describes the structure, behavior, and purpose of a <strong>Kurel package</strong> (Kubernetes Resources Launcher), which encapsulates a reusable, versionable application for Kubernetes. Kurel builds on Kure&rsquo;s patch engine to enable declarative configuration of application instances without templates or overlays.</p>
<hr>
<h2 id="goals">Goals</h2>
<ul>
<li>Enable reusable packaging of Kubernetes applications</li>
<li>Declarative customization via parameters + patches</li>
<li>No Helm-style templating or Kustomize overlays</li>
<li>Strong schema validation and deployment safety</li>
<li>Compatible with GitOps workflows (Flux/ArgoCD)</li>
<li>Multi-namespace and multi-phase deployment support</li>
</ul>
<hr>
<h2 id="design-philosophy">Design Philosophy</h2>
<p><strong>&ldquo;Kurel just generates YAML&rdquo;</strong> - Kurel is a declarative system for generating Kubernetes manifests with validation and customization capabilities. It is not a runtime system, orchestrator, or complex package manager.</p>
<h3 id="core-principles">Core Principles</h3>
<ul>
<li><strong>Explicit over Implicit</strong> - Always prefer explicit configuration</li>
<li><strong>Flexible but Validated</strong> - Maximum flexibility with comprehensive validation</li>
<li><strong>GitOps Compatible</strong> - Generate proper Kubernetes manifests for GitOps workflows</li>
<li><strong>No Templating</strong> - Use patches instead of complex template logic</li>
<li><strong>Deterministic Output</strong> - Same inputs always produce same outputs</li>
</ul>
<hr>
<h2 id="package-directory-structure">Package Directory Structure</h2>
<p>A Kurel package is a directory containing Kubernetes resources, parameters, patches, and metadata.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>my-app.kurel/
├── parameters.yaml          # All variables and package metadata
├── resources/               # Base Kubernetes manifests (one GVK per file)
│   ├── deployment.yaml
│   ├── service.yaml
│   └── namespaces.yaml
├── patches/                 # Modular patches with conditional enabling
│   ├── 00-base.kpatch      # Global patterns (explicit)
│   ├── features/
│   │   ├── 10-monitoring.kpatch
│   │   ├── 10-monitoring.yaml   # Patch metadata
│   │   └── 20-ingress.kpatch
│   └── profiles/
│       ├── 10-development.kpatch
│       └── 10-production.kpatch
├── schemas/                 # Auto-generated validation schemas
│   └── parameters.schema.json
├── examples/               # Example parameter configurations
│   └── production.yaml
└── README.md              # Package documentation

my-app.local.kurel/         # User extensions (optional)
├── patches/                # Additional user patches
│   └── 50-custom.kpatch
└── parameters.yaml         # Parameter overrides</code></pre></div>
<hr>
<h2 id="core-concepts">Core Concepts</h2>
<h3 id="1-parametersyaml---variables-and-metadata">1. <strong>parameters.yaml</strong> - Variables and Metadata</h3>
<p>Contains all package metadata and configurable variables with a structured hierarchy:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Package metadata (fixed key)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kurel</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-operator</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">version</span>: <span style="color:#ae81ff">0.68.0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">appVersion</span>: <span style="color:#ae81ff">0.68.0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">description</span>: <span style="color:#e6db74">&#34;Prometheus Operator for monitoring&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">home</span>: <span style="color:#ae81ff">https://github.com/prometheus-operator/prometheus-operator</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Global defaults (fixed key) </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#e6db74">&#34;${kurel.name}&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app.kubernetes.io/managed-by</span>: <span style="color:#e6db74">&#34;kurel&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">100m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">128Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">1Gi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Feature configuration (author-defined)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">monitoring</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">retention</span>: <span style="color:#ae81ff">30d</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">persistence</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">size</span>: <span style="color:#ae81ff">10Gi</span></span></span></code></pre></div>
<h3 id="2-resources---base-kubernetes-manifests">2. <strong>resources/</strong> - Base Kubernetes Manifests</h3>
<p>Contains the base Kubernetes resources, one GVK per file. These are standard Kubernetes YAML files without templating.</p>
<h3 id="3-patches---modular-patch-system">3. <strong>patches/</strong> - Modular Patch System</h3>
<p>Multiple patch files organized in subdirectories with numeric ordering:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#75715e"># patches/features/10-monitoring.kpatch</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">prometheus</span>.<span style="color:#a6e22e">spec</span>.<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">spec</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">securityContext</span>.<span style="color:#a6e22e">runAsNonRoot</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">prometheus</span>.<span style="color:#a6e22e">spec</span>.<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">spec</span>.<span style="color:#a6e22e">containers</span>.<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">resources</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${global.resources}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">tag</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${kurel.appVersion}&#34;</span></span></span></code></pre></div>
<p>Each patch can have corresponding metadata:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># patches/features/10-monitoring.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">enabled</span>: <span style="color:#e6db74">&#34;${monitoring.enabled}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">description</span>: <span style="color:#e6db74">&#34;Adds Prometheus monitoring capabilities&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">requires</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;features/05-metrics-base.kpatch&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">conflicts</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#e6db74">&#34;features/20-lightweight-monitoring.kpatch&#34;</span></span></span></code></pre></div>
<h3 id="4-gitops-deployment-phases">4. <strong>GitOps Deployment Phases</strong></h3>
<p>Resources can be annotated for ordered deployment:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Namespace</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">monitoring</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kurel.gokure.dev/install-phase</span>: <span style="color:#e6db74">&#34;pre-install&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kurel.gokure.dev/wait-for-ready</span>: <span style="color:#e6db74">&#34;true&#34;</span></span></span></code></pre></div>
<p><strong>Phases:</strong></p>
<ul>
<li><code>pre-install</code> - CRDs, namespaces, RBAC</li>
<li><code>main</code> - Primary application resources (default)</li>
<li><code>post-install</code> - Monitoring, backups, optional components</li>
</ul>
<h3 id="5-schema-generation-and-validation">5. <strong>Schema Generation and Validation</strong></h3>
<p>Schemas are auto-generated from parameters and Kubernetes API tracing:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kurel schema generate my-app.kurel/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generates schemas/parameters.schema.json</span></span></span></code></pre></div>
<p>Validation includes:</p>
<ul>
<li>Parameter value validation against schema</li>
<li>Variable reference validation in patches</li>
<li>Kubernetes resource validation</li>
<li>Patch dependency and conflict checking</li>
</ul>
<h3 id="6-user-extensions-localkurel">6. <strong>User Extensions (.local.kurel)</strong></h3>
<p>Users can extend packages without modifying the original:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>my-app.local.kurel/
├── patches/50-custom.kpatch    # Additional patches
└── parameters.yaml             # Parameter overrides</code></pre></div>
<hr>
<h2 id="variable-system">Variable System</h2>
<h3 id="variable-reference-syntax">Variable Reference Syntax</h3>
<ul>
<li><strong>Dot notation</strong>: <code>${section.subsection.value}</code></li>
<li><strong>Nested references</strong>: <code>${monitoring.serviceMonitor.enabled}</code> can reference <code>${monitoring.enabled}</code></li>
<li><strong>Metadata access</strong>: <code>${kurel.appVersion}</code> for package metadata</li>
</ul>
<h3 id="variable-resolution">Variable Resolution</h3>
<ol>
<li>Load package <code>parameters.yaml</code></li>
<li>Override with local <code>my-app.local.kurel/parameters.yaml</code></li>
<li>Resolve all variable references</li>
<li>Apply type validation and casting</li>
</ol>
<h3 id="fixed-top-level-keys">Fixed Top-Level Keys</h3>
<ul>
<li><strong><code>kurel:</code></strong> - Package metadata (name, version, description, etc.)</li>
<li><strong><code>global:</code></strong> - Default values applied across resources via base patches</li>
<li><strong>Everything else</strong> - Author-defined variable hierarchy</li>
</ul>
<hr>
<h2 id="patch-system">Patch System</h2>
<h3 id="patch-discovery-and-ordering">Patch Discovery and Ordering</h3>
<ul>
<li><strong>Discovery</strong>: <code>patches/**/*.kpatch</code></li>
<li><strong>Ordering</strong>: Numeric prefixes (<code>10-</code>, <code>20-</code>) then alphabetical</li>
<li><strong>Organization</strong>: Subdirectories preferred for better organization</li>
</ul>
<h3 id="conditional-patch-enabling">Conditional Patch Enabling</h3>
<ul>
<li><strong>Simple boolean expressions</strong>: <code>enabled: &quot;${monitoring.enabled}&quot;</code></li>
<li><strong>Auto-enable dependencies</strong>: <code>requires:</code> automatically enables referenced patches</li>
<li><strong>Conflict detection</strong>: <code>conflicts:</code> prevents incompatible patches</li>
</ul>
<h3 id="patch-processing-flow">Patch Processing Flow</h3>
<ol>
<li>Discover all patch files</li>
<li>Load metadata and evaluate conditions</li>
<li>Build dependency graph and auto-enable required patches</li>
<li>Validate no conflicts exist</li>
<li>Apply patches in dependency order</li>
</ol>
<hr>
<h2 id="multi-namespace-support">Multi-Namespace Support</h2>
<h3 id="flexible-namespace-handling">Flexible Namespace Handling</h3>
<ul>
<li><strong>Full flexibility</strong> - Resources can target any namespaces</li>
<li><strong>Namespace creation control</strong> - <code>global.namespaces.create</code> flag</li>
<li><strong>Cross-namespace references</strong> - Supported and validated</li>
</ul>
<h3 id="namespace-creation-pattern">Namespace Creation Pattern</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># parameters.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespaces</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">create</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">exclude</span>: [<span style="color:#e6db74">&#34;kube-system&#34;</span>, <span style="color:#e6db74">&#34;default&#34;</span>]</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#75715e"># patches/00-base.kpatch</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">namespace</span>.<span style="color:#960050;background-color:#1e0010">*</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">enabled</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${global.namespaces.create}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">metadata</span>.<span style="color:#a6e22e">labels</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${global.labels}&#34;</span></span></span></code></pre></div>
<hr>
<h2 id="build-and-validation">Build and Validation</h2>
<h3 id="cli-commands">CLI Commands</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Validate package and parameters</span>
</span></span><span style="display:flex;"><span>kurel validate my-app.kurel/ --values custom.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate schemas from package</span>
</span></span><span style="display:flex;"><span>kurel schema generate my-app.kurel/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Build final manifests</span>
</span></span><span style="display:flex;"><span>kurel build my-app.kurel/ --values custom.yaml --output ./manifests/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show package information</span>
</span></span><span style="display:flex;"><span>kurel info my-app.kurel/</span></span></code></pre></div>
<h3 id="generated-output-structure">Generated Output Structure</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>output/
├── pre-install/          # Phase 1 resources
│   ├── kustomization.yaml
│   └── namespaces.yaml
├── main/                 # Phase 2 resources (depends on pre-install)
│   ├── kustomization.yaml
│   ├── deployments.yaml
│   └── services.yaml
└── post-install/         # Phase 3 resources (depends on main)
    ├── kustomization.yaml
    └── monitoring.yaml</code></pre></div>
<hr>
<h2 id="design-constraints">Design Constraints</h2>
<ul>
<li>❌ No templating or embedded logic in YAML</li>
<li>❌ No overlays or merging strategies (use patches)</li>
<li>❌ No conditionals or loops in YAML</li>
<li>❌ No complex package dependencies (handled at GitOps level)</li>
<li>✅ Variable substitution allowed for keys in parameters.yaml</li>
<li>✅ All patches are deterministic, declarative, and validated</li>
<li>✅ Multi-namespace and multi-phase deployments supported</li>
</ul>
<hr>
<h2 id="use-cases">Use Cases</h2>
<ul>
<li><strong>Application Packaging</strong> - Reusable packages for common applications</li>
<li><strong>Platform Engineering</strong> - Standardized app bundles with customization boundaries</li>
<li><strong>GitOps Deployments</strong> - Generate manifests compatible with Flux/ArgoCD</li>
<li><strong>Multi-Environment</strong> - Same package deployed with different configurations</li>
<li><strong>Complex Applications</strong> - Multi-namespace apps with ordered deployment phases</li>
</ul>
<hr>
<h2 id="future-extensions">Future Extensions</h2>
<ul>
<li><strong>Enhanced Schema Generation</strong> - Better Kubernetes API tracing and CRD support</li>
<li><strong>Package Registry</strong> - Central repository for sharing kurel packages</li>
<li><strong>Advanced Validation</strong> - Integration with policy engines and security scanners</li>
<li><strong>IDE Integration</strong> - Language servers and editor support</li>
<li><strong>Testing Framework</strong> - Unit and integration testing for packages</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a href="http://localhost:1313/" style="text-decoration: none;">
    <h1 style="margin: 0; padding: 1rem; color: var(--MENU-SECTIONS-ACTIVE-BG-color);">Go Kure</h1>
</a>

<div style="padding: 0 1rem 1rem 1rem;">
    <div style="background-color: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 4px; padding: 0.75rem;">
        <div style="display: flex; align-items: center; font-weight: bold; color: #ffc107; margin-bottom: 0.25rem; font-size: 0.9rem;">
            <span style="margin-right: 0.5rem;">⚠️</span>
            <span>Pre-Release</span>
        </div>
        <div style="font-size: 0.8rem; color: #ffeb3b; line-height: 1.3;">
            Unreleased software - APIs subject to change
        </div>
    </div>
</div>
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/overview/index.html"><a class="padding" href="/overview/index.html">Overview</a></li>
            <li class="" data-nav-id="/getting-started/index.html"><a class="padding" href="/getting-started/index.html">Getting Started</a></li>
            <li class="" data-nav-id="/architecture/index.html"><a class="padding" href="/architecture/index.html">Architecture</a></li>
            <li class="parent " data-nav-id="/packages/index.html"><a class="padding" href="/packages/index.html">Packages</a><ul id="R-subsections-bdf1e8ce92aa8ff6883c617f10480430" class="collapsible-menu">
            <li class="parent alwaysopen " data-nav-id="/packages/launcher/index.html"><a class="padding" href="/packages/launcher/index.html">Launcher Package</a><ul id="R-subsections-9d3dfa62b00c459cf937434644ffeb15" class="collapsible-menu">
            <li class="active hidden " data-nav-id="/packages/launcher/design/index.html"><a class="padding" href="/packages/launcher/design/index.html"></a></li></ul></li>
            <li class="" data-nav-id="/packages/patch/index.html"><a class="padding" href="/packages/patch/index.html">Patch Package</a></li></ul></li>
            <li class="" data-nav-id="/examples/index.html"><a class="padding" href="/examples/index.html">Examples</a></li>
            <li class="" data-nav-id="/resources/index.html"><a class="padding" href="/resources/index.html">Resources</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><div style="position: sticky; bottom: 0; padding: 1rem; margin-top: 2rem; background-color: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-top: 3px solid #ffc107;">
    <div style="display: flex; align-items: center; font-weight: bold; color: #ffc107; margin-bottom: 0.5rem;">
        <span style="margin-right: 0.5rem;">⚠️</span>
        <span>Pre-Release Software</span>
    </div>
    <div style="font-size: 0.875rem; color: #ffeb3b; line-height: 1.4;">
        This documentation is for unreleased software. Features and APIs may change before the official release.
    </div>
</div></div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1754430541" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1754430541" defer></script>
    <script src="/js/theme.js?1754430541" defer></script>
  </body>
</html>
