<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=35861&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.2">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Kure Patch File Format â€” Specification This document describes the complete structure and semantics of .kpatch files used in Kure to define Kubernetes resource overrides.
Kure patches are:
Flat, line-based TOML-inspired, but not valid TOML Declarative (no conditionals or logic) Scoped to specific resource kinds and instances 1. File Extension All patch files must use the .kpatch extension. These are plain text files with Kureâ€™s custom patch format.
Examples:
deployment.app.kpatch service.backend.kpatch config.kpatch (merged aggregate) 2. Patch Header Syntax Each patch file is divided into sections. Each section is introduced by a header:">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Kure Patch File Format â€” Specification This document describes the complete structure and semantics of .kpatch files used in Kure to define Kubernetes resource overrides.
Kure patches are:
Flat, line-based TOML-inspired, but not valid TOML Declarative (no conditionals or logic) Scoped to specific resource kinds and instances 1. File Extension All patch files must use the .kpatch extension. These are plain text files with Kureâ€™s custom patch format.
Examples:
deployment.app.kpatch service.backend.kpatch config.kpatch (merged aggregate) 2. Patch Header Syntax Each patch file is divided into sections. Each section is introduced by a header:">
    <meta property="og:url" content="http://localhost:35861/packages/patch/design/index.html">
    <meta property="og:site_name" content="Go Kure">
    <meta property="og:description" content="Kure Patch File Format â€” Specification This document describes the complete structure and semantics of .kpatch files used in Kure to define Kubernetes resource overrides.
Kure patches are:
Flat, line-based TOML-inspired, but not valid TOML Declarative (no conditionals or logic) Scoped to specific resource kinds and instances 1. File Extension All patch files must use the .kpatch extension. These are plain text files with Kureâ€™s custom patch format.
Examples:
deployment.app.kpatch service.backend.kpatch config.kpatch (merged aggregate) 2. Patch Header Syntax Each patch file is divided into sections. Each section is introduced by a header:">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Packages">
    <meta itemprop="description" content="Kure Patch File Format â€” Specification This document describes the complete structure and semantics of .kpatch files used in Kure to define Kubernetes resource overrides.
Kure patches are:
Flat, line-based TOML-inspired, but not valid TOML Declarative (no conditionals or logic) Scoped to specific resource kinds and instances 1. File Extension All patch files must use the .kpatch extension. These are plain text files with Kureâ€™s custom patch format.
Examples:
deployment.app.kpatch service.backend.kpatch config.kpatch (merged aggregate) 2. Patch Header Syntax Each patch file is divided into sections. Each section is introduced by a header:">
    <meta itemprop="wordCount" content="570">
    <title></title>
    <link href="/css/auto-complete/auto-complete.min.css?1754411446" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1754411446" defer></script>
    <script src="/js/search-lunr.js?1754411446" defer></script>
    <script src="/js/search.js?1754411446" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1754411446";
    </script>
    <script src="/js/lunr/lunr.min.js?1754411446" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1754411446" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1754411446" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1754411446" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1754411446" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1754411446" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1754411446" rel="stylesheet">
    <link href="/css/theme.css?1754411446" rel="stylesheet">
    <link href="/css/format-html.css?1754411446" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/packages\/patch\/design\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:35861';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'auto' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/packages/patch/design/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#1-file-extension">1. File Extension</a></li>
    <li><a href="#2-patch-header-syntax">2. Patch Header Syntax</a>
      <ul>
        <li><a href="#21-header-grammar">2.1 Header Grammar</a></li>
        <li><a href="#22-examples">2.2 Examples</a></li>
      </ul>
    </li>
    <li><a href="#3-patch-keys">3. Patch Keys</a>
      <ul>
        <li><a href="#31-values">3.1 Values</a></li>
        <li><a href="#32-examples">3.2 Examples</a></li>
      </ul>
    </li>
    <li><a href="#4-variables">4. Variables</a>
      <ul>
        <li><a href="#syntax">Syntax</a></li>
        <li><a href="#scope">Scope</a></li>
        <li><a href="#example">Example</a></li>
      </ul>
    </li>
    <li><a href="#5-lists-and-selectors">5. Lists and Selectors</a>
      <ul>
        <li><a href="#51-list-selector-syntax">5.1 List Selector Syntax</a></li>
      </ul>
    </li>
    <li><a href="#6-implementation-status">6. Implementation Status</a>
      <ul>
        <li><a href="#supported-features">Supported Features</a></li>
        <li><a href="#current-limitations">Current Limitations</a></li>
        <li><a href="#future-enhancements">Future Enhancements</a></li>
      </ul>
    </li>
    <li><a href="#7-purpose">7. Purpose</a></li>
    <li><a href="#8-example">8. Example</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">Go Kure</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/packages/index.html"><span itemprop="name">Packages</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/packages/index.html" title="Packages (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><span class="topbar-control"><i class="fa-fw fas fa-chevron-right"></i></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable packages" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h1 id="kure-patch-file-format--specification">Kure Patch File Format â€” Specification</h1>
<p>This document describes the complete structure and semantics of <code>.kpatch</code> files used in Kure to define Kubernetes resource overrides.</p>
<p>Kure patches are:</p>
<ul>
<li>Flat, line-based</li>
<li>TOML-inspired, but <strong>not</strong> valid TOML</li>
<li>Declarative (no conditionals or logic)</li>
<li>Scoped to specific resource kinds and instances</li>
</ul>
<hr>
<h2 id="1-file-extension">1. File Extension</h2>
<p>All patch files must use the <code>.kpatch</code> extension. These are plain text files with Kure&rsquo;s custom patch format.</p>
<p>Examples:</p>
<ul>
<li><code>deployment.app.kpatch</code></li>
<li><code>service.backend.kpatch</code></li>
<li><code>config.kpatch</code> (merged aggregate)</li>
</ul>
<hr>
<h2 id="2-patch-header-syntax">2. Patch Header Syntax</h2>
<p>Each patch file is divided into sections. Each section is introduced by a <strong>header</strong>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">kind</span>.<span style="color:#a6e22e">name</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">kind</span>.<span style="color:#a6e22e">name</span>.<span style="color:#a6e22e">section</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">kind</span>.<span style="color:#a6e22e">name</span>.<span style="color:#a6e22e">section</span>.<span style="color:#a6e22e">key</span>=<span style="color:#a6e22e">value</span>]
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">kind</span>.<span style="color:#a6e22e">name</span>.<span style="color:#a6e22e">section</span>.<span style="color:#a6e22e">index</span>]</span></span></code></pre></div>
<h3 id="21-header-grammar">2.1 Header Grammar</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[kind.name[.section[.subsection[.selector or .index]]]]</code></pre></div>
<h4 id="simplified-selector-rule">Simplified Selector Rule</h4>
<p>List selectors using <code>key=value</code> pairs can omit brackets unless the key or value contains special characters (e.g., <code>.</code>, <code>=</code>, <code>[</code>, <code>]</code>, <code>+</code>, <code>-</code>).</p>
<p>Preferred syntax:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">containers</span>.<span style="color:#a6e22e">name</span>=<span style="color:#a6e22e">main</span>]</span></span></code></pre></div>
<p>Bracketed fallback (required when ambiguous):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">containers</span>[<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">name</span>=<span style="color:#a6e22e">main</span>]]</span></span></code></pre></div>
<h3 id="22-examples">2.2 Examples</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>]                           <span style="color:#75715e"># Top-level fields</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">containers</span>]               <span style="color:#75715e"># Applies to all containers</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">containers</span>.<span style="color:#a6e22e">name</span>=<span style="color:#a6e22e">main</span>]     <span style="color:#75715e"># Replace item with name == &#34;main&#34;</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">ports</span>.<span style="color:#ae81ff">0</span>]                  <span style="color:#75715e"># First port entry</span></span></span></code></pre></div>
<hr>
<h2 id="3-patch-keys">3. Patch Keys</h2>
<p>Within each header block, individual settings are expressed as <strong>dotpaths</strong>, referencing fields to override.</p>
<p>Syntax:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#a6e22e">key</span>.<span style="color:#a6e22e">subkey</span>.<span style="color:#a6e22e">subsubkey</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#a6e22e">value</span></span></span></code></pre></div>
<h3 id="31-values">3.1 Values</h3>
<ul>
<li>Must be scalar (string, int, float, boolean)</li>
<li>Strings may be quoted or unquoted (if YAML-compliant)</li>
<li>Variables are allowed (see below)</li>
</ul>
<h3 id="32-examples">3.2 Examples</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#a6e22e">replicas</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">repository</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#a6e22e">ghcr</span>.<span style="color:#a6e22e">io</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">example</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">myapp</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">limits</span>.<span style="color:#a6e22e">cpu</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">500</span><span style="color:#a6e22e">m</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">host</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${values.domain}&#34;</span></span></span></code></pre></div>
<hr>
<h2 id="4-variables">4. Variables</h2>
<p>Kure patch files support scalar substitution using instance-level variables.</p>
<h3 id="syntax">Syntax</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>{<span style="color:#a6e22e">features</span>.<span style="color:#a6e22e">myflag</span>}
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>{<span style="color:#a6e22e">values</span>.<span style="color:#a6e22e">domain</span>}</span></span></code></pre></div>
<h3 id="scope">Scope</h3>
<ul>
<li><code>features.*</code>: booleans provided programmatically</li>
<li><code>values.*</code>: strings or numbers provided programmatically</li>
</ul>
<p>Variables must resolve to scalars. No objects or arrays allowed.</p>
<h3 id="example">Example</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">enabled</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#960050;background-color:#1e0010">$</span>{<span style="color:#a6e22e">features</span>.<span style="color:#a6e22e">web_enabled</span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">replicas</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">app</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hostname</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${values.name}.${values.domain}&#34;</span></span></span></code></pre></div>
<hr>
<h2 id="5-lists-and-selectors">5. Lists and Selectors</h2>
<p>Kure supports patching into Kubernetes lists like <code>containers</code>, <code>env</code>, <code>ports</code>, <code>volumes</code>, <code>volumeMounts</code>, etc.</p>
<h3 id="51-list-selector-syntax">5.1 List Selector Syntax</h3>
<p>List selectors allow addressing or inserting elements within Kubernetes lists.</p>
<table>
  <thead>
      <tr>
          <th>Selector Type</th>
          <th>Example</th>
          <th>Meaning</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>By index</td>
          <td><code>spec.containers[0]</code> / <code>spec.containers.0</code></td>
          <td>Replace at index 0</td>
      </tr>
      <tr>
          <td>By key-value</td>
          <td><code>spec.containers[name=web]</code> / <code>...name=web</code></td>
          <td>Replace item with <code>name=web</code></td>
      </tr>
      <tr>
          <td>Insert before index</td>
          <td><code>spec.containers[-3]</code></td>
          <td>Insert before index 3</td>
      </tr>
      <tr>
          <td>Insert before match</td>
          <td><code>spec.containers[-name=sidecar]</code></td>
          <td>Insert before item matching <code>name=sidecar</code></td>
      </tr>
      <tr>
          <td>Insert after index</td>
          <td><code>spec.containers[+2]</code></td>
          <td>Insert after index 2</td>
      </tr>
      <tr>
          <td>Insert after match</td>
          <td><code>spec.containers[+name=main]</code></td>
          <td>Insert after item matching <code>name=main</code></td>
      </tr>
      <tr>
          <td>Append to list</td>
          <td><code>spec.containers[-]</code></td>
          <td>Append item to end of list</td>
      </tr>
  </tbody>
</table>
<p>Note: You may omit brackets around <code>key=value</code> unless the key or value contains special characters (e.g. <code>.</code>, <code>[</code>, <code>]</code>).</p>
<hr>
<h2 id="6-implementation-status">6. Implementation Status</h2>
<h3 id="supported-features">Supported Features</h3>
<ul>
<li>Dual format support (YAML and TOML) with automatic detection</li>
<li>Advanced structure preservation maintaining comments and formatting</li>
<li>Intelligent path resolution with disambiguation</li>
<li>Variable substitution with <code>${values.key}</code> and <code>${features.flag}</code> syntax</li>
<li>Automatic type inference for Kubernetes compatibility</li>
<li>Comprehensive debug logging with <code>KURE_DEBUG=1</code></li>
<li>Graceful error handling with warnings for missing targets</li>
</ul>
<h3 id="current-limitations">Current Limitations</h3>
<ul>
<li>No logic, conditionals, or templating expressions</li>
<li>No map merging â€” field values are completely replaced</li>
<li>Only scalar values supported (arrays/objects not allowed in patch values)</li>
<li>âœ… Pure index-based insertion (<code>[-3]</code>, <code>[+2]</code>) now implemented</li>
<li>Variable context must be provided programmatically</li>
<li>No OpenAPI schema validation (planned for future implementation)</li>
</ul>
<h3 id="future-enhancements">Future Enhancements</h3>
<ul>
<li>OpenAPI schema validation for patch target verification</li>
</ul>
<hr>
<h2 id="7-purpose">7. Purpose</h2>
<p>Kure patches are designed to:</p>
<ul>
<li>Override Kubernetes manifests without templates</li>
<li>Enable reusable, modular package definitions</li>
<li>Support clean schema validation via OpenAPI</li>
<li>Allow editing via CLI and JSONSchema-aware UIs</li>
</ul>
<hr>
<h2 id="8-example">8. Example</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">replicas</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">deployment</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">containers</span>.<span style="color:#a6e22e">name</span>=<span style="color:#a6e22e">main</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">repository</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#a6e22e">ghcr</span>.<span style="color:#a6e22e">io</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">example</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">app</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">tag</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${values.version}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">requests</span>.<span style="color:#a6e22e">cpu</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">250</span><span style="color:#a6e22e">m</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">ports</span>.<span style="color:#a6e22e">name</span>=<span style="color:#a6e22e">http</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">port</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">ingress</span>.<span style="color:#a6e22e">web</span>.<span style="color:#a6e22e">tls</span>.<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hosts</span>.<span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;${values.name}.${values.domain}&#34;</span></span></span></code></pre></div>
<p>This file:</p>
<ul>
<li>Updates the replica count</li>
<li>Modifies the main container image and CPU request</li>
<li>Sets the service port</li>
<li>Configures the first TLS entry of the ingress</li>
</ul>
<hr>
<p>This format is the foundation for declarative, schema-validated Kubernetes customization in Kure.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/index.html">
            <div class="logo-title">Go Kure</div>
          </a>
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/architecture/index.html"><a class="padding" href="/architecture/index.html">Architectures</a></li>
            <li class="" data-nav-id="/examples/index.html"><a class="padding" href="/examples/index.html">Examples</a></li>
            <li class="parent " data-nav-id="/packages/index.html"><a class="padding" href="/packages/index.html">Packages</a><ul id="R-subsections-bdf1e8ce92aa8ff6883c617f10480430" class="collapsible-menu">
            <li class="active hidden " data-nav-id="/packages/patch/design/index.html"><a class="padding" href="/packages/patch/design/index.html"></a></li></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1754411446" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1754411446" defer></script>
    <script src="/js/theme.js?1754411446" defer></script>
  </body>
</html>
