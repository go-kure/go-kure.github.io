<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.155.3"><meta name=generator content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862"><meta name=description content="ApplicationConfig Generators Design Document Note: For implementation patterns and architectural conventions, see ARCHITECTURE.md Overview The ApplicationConfig system provides a pluggable architecture for generating Kubernetes resources from different configuration formats. This document describes the design for supporting multiple ApplicationConfig implementations with automatic type detection and versioning.
Background The ApplicationConfig interface is embedded in the hierarchical structure:
Cluster ‚Üí contains Nodes (tree structure) Node ‚Üí contains a Bundle and child Nodes Bundle ‚Üí contains multiple Applications Application ‚Üí contains an ApplicationConfig implementation Each ApplicationConfig implementation generates Kubernetes resources specific to its type (e.g., AppWorkload, HelmChart, Kustomize)."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Design :: Go Kure"><meta name=twitter:description content="ApplicationConfig Generators Design Document Note: For implementation patterns and architectural conventions, see ARCHITECTURE.md Overview The ApplicationConfig system provides a pluggable architecture for generating Kubernetes resources from different configuration formats. This document describes the design for supporting multiple ApplicationConfig implementations with automatic type detection and versioning.
Background The ApplicationConfig interface is embedded in the hierarchical structure:
Cluster ‚Üí contains Nodes (tree structure) Node ‚Üí contains a Bundle and child Nodes Bundle ‚Üí contains multiple Applications Application ‚Üí contains an ApplicationConfig implementation Each ApplicationConfig implementation generates Kubernetes resources specific to its type (e.g., AppWorkload, HelmChart, Kustomize)."><meta property="og:url" content="https://www.gokure.dev/packages/stack/generators/design/index.html"><meta property="og:site_name" content="Go Kure"><meta property="og:title" content="Design :: Go Kure"><meta property="og:description" content="ApplicationConfig Generators Design Document Note: For implementation patterns and architectural conventions, see ARCHITECTURE.md Overview The ApplicationConfig system provides a pluggable architecture for generating Kubernetes resources from different configuration formats. This document describes the design for supporting multiple ApplicationConfig implementations with automatic type detection and versioning.
Background The ApplicationConfig interface is embedded in the hierarchical structure:
Cluster ‚Üí contains Nodes (tree structure) Node ‚Üí contains a Bundle and child Nodes Bundle ‚Üí contains multiple Applications Application ‚Üí contains an ApplicationConfig implementation Each ApplicationConfig implementation generates Kubernetes resources specific to its type (e.g., AppWorkload, HelmChart, Kustomize)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Packages"><meta itemprop=name content="Design :: Go Kure"><meta itemprop=description content="ApplicationConfig Generators Design Document Note: For implementation patterns and architectural conventions, see ARCHITECTURE.md Overview The ApplicationConfig system provides a pluggable architecture for generating Kubernetes resources from different configuration formats. This document describes the design for supporting multiple ApplicationConfig implementations with automatic type detection and versioning.
Background The ApplicationConfig interface is embedded in the hierarchical structure:
Cluster ‚Üí contains Nodes (tree structure) Node ‚Üí contains a Bundle and child Nodes Bundle ‚Üí contains multiple Applications Application ‚Üí contains an ApplicationConfig implementation Each ApplicationConfig implementation generates Kubernetes resources specific to its type (e.g., AppWorkload, HelmChart, Kustomize)."><meta itemprop=wordCount content="1391"><title>Design :: Go Kure</title><link href=/css/auto-complete/auto-complete.min.css?1770906066 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1770906066 defer></script><script src=/js/search-lunr.min.js?1770906066 defer></script><script src=/js/search.min.js?1770906066 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/searchindex.en.js?1770906066"</script><script src=/js/lunr/lunr.min.js?1770906066 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1770906066 defer></script><script src=/js/lunr/lunr.multi.min.js?1770906066 defer></script><script src=/js/lunr/lunr.en.min.js?1770906066 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1770906066 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1770906066 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1770906066 rel=stylesheet><link href=/css/theme.min.css?1770906066 rel=stylesheet><link href=/css/format-html.min.css?1770906066 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/packages/stack/generators/design/index.html",window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://www.gokure.dev",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["relearn-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><div class="notices warning" style=margin-bottom:1rem><div class=label>‚ö†Ô∏è Work in Progress</div><div class=content>Kure is currently under active development and has not been released yet. APIs and features are subject to change.</div></div></head><body class="mobile-support html" data-url=/packages/stack/generators/design/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#background>Background</a></li><li><a href=#design-goals>Design Goals</a></li><li><a href=#architecture>Architecture</a><ul><li><a href=#gvk-convention>GVK Convention</a></li><li><a href=#type-registry>Type Registry</a></li><li><a href=#generator-interface-hierarchy>Generator Interface Hierarchy</a></li></ul></li><li><a href=#implementation>Implementation</a><ul><li><a href=#registry-implementation>Registry Implementation</a></li><li><a href=#type-aware-wrapper>Type-Aware Wrapper</a></li><li><a href=#example-generator-implementations>Example Generator Implementations</a></li></ul></li><li><a href=#configuration-examples>Configuration Examples</a><ul><li><a href=#appworkload-configuration>AppWorkload Configuration</a></li><li><a href=#helmchart-configuration>HelmChart Configuration</a></li><li><a href=#kustomize-configuration>Kustomize Configuration</a></li></ul></li><li><a href=#version-evolution>Version Evolution</a><ul><li><a href=#schema-versioning-strategy>Schema Versioning Strategy</a></li><li><a href=#version-migration>Version Migration</a></li></ul></li><li><a href=#benefits>Benefits</a></li><li><a href=#future-enhancements>Future Enhancements</a></li><li><a href=#testing-strategy>Testing Strategy</a></li><li><a href=#migration-path>Migration Path</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>Go Kure</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/packages/index.html><span itemprop=name>Packages</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/packages/stack/index.html><span itemprop=name>Stack</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/packages/stack/generators/index.html><span itemprop=name>Generators</span></a><meta itemprop=position content="4">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Design</span><meta itemprop=position content="5"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/packages/stack/generators/index.html title="Generators (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/packages/stack/generators/architecture/index.html title="Architecture (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable packages" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=design>Design</h1><h1 id=applicationconfig-generators-design-document>ApplicationConfig Generators Design Document</h1><blockquote><p><strong>Note</strong>: For implementation patterns and architectural conventions, see <a href=ARCHITECTURE/>ARCHITECTURE.md</a></p></blockquote><h2 id=overview>Overview</h2><p>The ApplicationConfig system provides a pluggable architecture for generating Kubernetes resources from different configuration formats. This document describes the design for supporting multiple ApplicationConfig implementations with automatic type detection and versioning.</p><h2 id=background>Background</h2><p>The <code>ApplicationConfig</code> interface is embedded in the hierarchical structure:</p><ul><li><strong>Cluster</strong> ‚Üí contains <strong>Nodes</strong> (tree structure)</li><li><strong>Node</strong> ‚Üí contains a <strong>Bundle</strong> and child <strong>Nodes</strong></li><li><strong>Bundle</strong> ‚Üí contains multiple <strong>Applications</strong></li><li><strong>Application</strong> ‚Üí contains an <strong>ApplicationConfig</strong> implementation</li></ul><p>Each ApplicationConfig implementation generates Kubernetes resources specific to its type (e.g., AppWorkload, HelmChart, Kustomize).</p><h2 id=design-goals>Design Goals</h2><ol><li><strong>Type Safety</strong>: Compile-time checking for each generator type</li><li><strong>Extensibility</strong>: Easy addition of new generator types without modifying core interfaces</li><li><strong>Version Management</strong>: Support for evolving generator schemas over time</li><li><strong>API Readiness</strong>: Dynamic type selection and validation for API consumers</li><li><strong>Clean Separation</strong>: Self-contained generator implementations</li></ol><h2 id=architecture>Architecture</h2><h3 id=gvk-convention>GVK Convention</h3><p>Following Kubernetes&rsquo; Group, Version, Kind (GVK) pattern for type identification:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>generators.gokure.dev/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>AppWorkload</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>web-app</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># ... generator-specific configuration</span></span></span></code></pre></div><p>This provides:</p><ul><li><strong>Group</strong>: <code>generators.gokure.dev</code> - namespace for all generators</li><li><strong>Version</strong>: <code>v1alpha1</code>, <code>v1beta1</code>, <code>v1</code> - schema evolution</li><li><strong>Kind</strong>: <code>AppWorkload</code>, <code>HelmChart</code>, <code>Kustomize</code> - generator type</li></ul><h3 id=type-registry>Type Registry</h3><p>A central registry manages all available ApplicationConfig implementations:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>GVK</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Group</span>   <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Version</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Kind</span>    <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ApplicationConfigFactory</span> <span style=color:#66d9ef>func</span>() <span style=color:#a6e22e>ApplicationConfig</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Registry</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>factories</span> <span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>GVK</span>]<span style=color:#a6e22e>ApplicationConfigFactory</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mu</span>        <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>RWMutex</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h3 id=generator-interface-hierarchy>Generator Interface Hierarchy</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Core interface - unchanged</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ApplicationConfig</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Generate</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>Application</span>) ([]<span style=color:#f92672>*</span><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Object</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Versioned interface for GVK support</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>VersionedConfig</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ApplicationConfig</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>GetAPIVersion</span>() <span style=color:#66d9ef>string</span>  <span style=color:#75715e>// Returns &#34;group/version&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>GetKind</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Metadata interfaces (optional)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>NamedConfig</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>GetName</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>SetName</span>(<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>NamespacedConfig</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>GetNamespace</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>SetNamespace</span>(<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h2 id=implementation>Implementation</h2><h3 id=registry-implementation>Registry Implementation</h3><p>Located in <code>pkg/stack/generators/registry.go</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>generators</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;strings&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;sync&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>GVK</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Group</span>   <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Version</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Kind</span>    <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>g</span> <span style=color:#a6e22e>GVK</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%s/%s, Kind=%s&#34;</span>, <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Group</span>, <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Version</span>, <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>Kind</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>ParseAPIVersion</span>(<span style=color:#a6e22e>apiVersion</span>, <span style=color:#a6e22e>kind</span> <span style=color:#66d9ef>string</span>) <span style=color:#a6e22e>GVK</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>parts</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>apiVersion</span>, <span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>parts</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>GVK</span>{
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Group</span>:   <span style=color:#a6e22e>parts</span>[<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Version</span>: <span style=color:#a6e22e>parts</span>[<span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Kind</span>:    <span style=color:#a6e22e>kind</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Handle core/v1 style</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>GVK</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Group</span>:   <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Version</span>: <span style=color:#a6e22e>parts</span>[<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Kind</span>:    <span style=color:#a6e22e>kind</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ApplicationConfigFactory</span> <span style=color:#66d9ef>func</span>() <span style=color:#a6e22e>ApplicationConfig</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> (
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>registry</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Registry</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>factories</span>: make(<span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>GVK</span>]<span style=color:#a6e22e>ApplicationConfigFactory</span>),
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Registry</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>factories</span> <span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>GVK</span>]<span style=color:#a6e22e>ApplicationConfigFactory</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mu</span>        <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>RWMutex</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Registry</span>) <span style=color:#a6e22e>Register</span>(<span style=color:#a6e22e>gvk</span> <span style=color:#a6e22e>GVK</span>, <span style=color:#a6e22e>factory</span> <span style=color:#a6e22e>ApplicationConfigFactory</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>Lock</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>Unlock</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>factories</span>[<span style=color:#a6e22e>gvk</span>] = <span style=color:#a6e22e>factory</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Registry</span>) <span style=color:#a6e22e>Create</span>(<span style=color:#a6e22e>gvk</span> <span style=color:#a6e22e>GVK</span>) (<span style=color:#a6e22e>ApplicationConfig</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RLock</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RUnlock</span>()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>factory</span>, <span style=color:#a6e22e>exists</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>factories</span>[<span style=color:#a6e22e>gvk</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>exists</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;unknown application config type: %s&#34;</span>, <span style=color:#a6e22e>gvk</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>factory</span>(), <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Registry</span>) <span style=color:#a6e22e>ListKinds</span>() []<span style=color:#a6e22e>GVK</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RLock</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>mu</span>.<span style=color:#a6e22e>RUnlock</span>()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>kinds</span> <span style=color:#f92672>:=</span> make([]<span style=color:#a6e22e>GVK</span>, <span style=color:#ae81ff>0</span>, len(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>factories</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>gvk</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>factories</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>kinds</span> = append(<span style=color:#a6e22e>kinds</span>, <span style=color:#a6e22e>gvk</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>kinds</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Global registry functions</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Register</span>(<span style=color:#a6e22e>gvk</span> <span style=color:#a6e22e>GVK</span>, <span style=color:#a6e22e>factory</span> <span style=color:#a6e22e>ApplicationConfigFactory</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>registry</span>.<span style=color:#a6e22e>Register</span>(<span style=color:#a6e22e>gvk</span>, <span style=color:#a6e22e>factory</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Create</span>(<span style=color:#a6e22e>apiVersion</span>, <span style=color:#a6e22e>kind</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>ApplicationConfig</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gvk</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ParseAPIVersion</span>(<span style=color:#a6e22e>apiVersion</span>, <span style=color:#a6e22e>kind</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>registry</span>.<span style=color:#a6e22e>Create</span>(<span style=color:#a6e22e>gvk</span>)
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h3 id=type-aware-wrapper>Type-Aware Wrapper</h3><p>Located in <code>pkg/stack/application_wrapper.go</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>stack</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;gopkg.in/yaml.v3&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/go-kure/kure/pkg/stack/generators&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ApplicationWrapper provides type detection and unmarshaling</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ApplicationWrapper</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>APIVersion</span> <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;apiVersion&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Kind</span>       <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;kind&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Metadata</span>   <span style=color:#a6e22e>ApplicationMetadata</span>    <span style=color:#e6db74>`yaml:&#34;metadata&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Spec</span>       <span style=color:#a6e22e>generators</span>.<span style=color:#a6e22e>ApplicationConfig</span> <span style=color:#e6db74>`yaml:&#34;spec&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ApplicationMetadata</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Name</span>      <span style=color:#66d9ef>string</span>            <span style=color:#e6db74>`yaml:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Namespace</span> <span style=color:#66d9ef>string</span>            <span style=color:#e6db74>`yaml:&#34;namespace,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Labels</span>    <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span> <span style=color:#e6db74>`yaml:&#34;labels,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>w</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ApplicationWrapper</span>) <span style=color:#a6e22e>UnmarshalYAML</span>(<span style=color:#a6e22e>node</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>yaml</span>.<span style=color:#a6e22e>Node</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// First pass: extract GVK</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>gvkDetect</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>APIVersion</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`yaml:&#34;apiVersion&#34;`</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Kind</span>       <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`yaml:&#34;kind&#34;`</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>Decode</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>gvkDetect</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to detect GVK: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>gvkDetect</span>.<span style=color:#a6e22e>APIVersion</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>gvkDetect</span>.<span style=color:#a6e22e>Kind</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;apiVersion and kind are required fields&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create appropriate config instance</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>config</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>generators</span>.<span style=color:#a6e22e>Create</span>(<span style=color:#a6e22e>gvkDetect</span>.<span style=color:#a6e22e>APIVersion</span>, <span style=color:#a6e22e>gvkDetect</span>.<span style=color:#a6e22e>Kind</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to create config for %s/%s: %w&#34;</span>, 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>gvkDetect</span>.<span style=color:#a6e22e>APIVersion</span>, <span style=color:#a6e22e>gvkDetect</span>.<span style=color:#a6e22e>Kind</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Decode full content</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>raw</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>APIVersion</span> <span style=color:#66d9ef>string</span>                      <span style=color:#e6db74>`yaml:&#34;apiVersion&#34;`</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Kind</span>       <span style=color:#66d9ef>string</span>                      <span style=color:#e6db74>`yaml:&#34;kind&#34;`</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Metadata</span>   <span style=color:#a6e22e>ApplicationMetadata</span>         <span style=color:#e6db74>`yaml:&#34;metadata&#34;`</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Spec</span>       <span style=color:#a6e22e>yaml</span>.<span style=color:#a6e22e>Node</span>                   <span style=color:#e6db74>`yaml:&#34;spec&#34;`</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>node</span>.<span style=color:#a6e22e>Decode</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>raw</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to decode wrapper: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Decode spec into the specific config type</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>raw</span>.<span style=color:#a6e22e>Spec</span>.<span style=color:#a6e22e>Decode</span>(<span style=color:#a6e22e>config</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;failed to decode spec: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>APIVersion</span> = <span style=color:#a6e22e>raw</span>.<span style=color:#a6e22e>APIVersion</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Kind</span> = <span style=color:#a6e22e>raw</span>.<span style=color:#a6e22e>Kind</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Metadata</span> = <span style=color:#a6e22e>raw</span>.<span style=color:#a6e22e>Metadata</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Spec</span> = <span style=color:#a6e22e>config</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>w</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ApplicationWrapper</span>) <span style=color:#a6e22e>ToApplication</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>Application</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>app</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>NewApplication</span>(<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Metadata</span>.<span style=color:#a6e22e>Name</span>, <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Metadata</span>.<span style=color:#a6e22e>Namespace</span>, <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Spec</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// If the config supports metadata injection, apply it</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>named</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Spec</span>.(<span style=color:#a6e22e>generators</span>.<span style=color:#a6e22e>NamedConfig</span>); <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>named</span>.<span style=color:#a6e22e>SetName</span>(<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Metadata</span>.<span style=color:#a6e22e>Name</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>namespaced</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Spec</span>.(<span style=color:#a6e22e>generators</span>.<span style=color:#a6e22e>NamespacedConfig</span>); <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>namespaced</span>.<span style=color:#a6e22e>SetNamespace</span>(<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Metadata</span>.<span style=color:#a6e22e>Namespace</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>app</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h3 id=example-generator-implementations>Example Generator Implementations</h3><h4 id=appworkload-v1alpha1>AppWorkload v1alpha1</h4><p>Located in <code>pkg/stack/generators/appworkload.go</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>generators</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Register</span>(<span style=color:#a6e22e>GVK</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Group</span>:   <span style=color:#e6db74>&#34;generators.gokure.dev&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Version</span>: <span style=color:#e6db74>&#34;v1alpha1&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Kind</span>:    <span style=color:#e6db74>&#34;AppWorkload&#34;</span>,
</span></span><span style=display:flex><span>    }, <span style=color:#66d9ef>func</span>() <span style=color:#a6e22e>ApplicationConfig</span> { <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>AppWorkloadConfig</span>{} })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// AppWorkloadConfig with GVK support</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AppWorkloadConfig</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Existing fields...</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Name</span>      <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`yaml:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Namespace</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`yaml:&#34;namespace,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ... rest of existing implementation</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfig</span>) <span style=color:#a6e22e>GetAPIVersion</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;generators.gokure.dev/v1alpha1&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfig</span>) <span style=color:#a6e22e>GetKind</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;AppWorkload&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfig</span>) <span style=color:#a6e22e>GetName</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Name</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfig</span>) <span style=color:#a6e22e>SetName</span>(<span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Name</span> = <span style=color:#a6e22e>name</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfig</span>) <span style=color:#a6e22e>GetNamespace</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Namespace</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfig</span>) <span style=color:#a6e22e>SetNamespace</span>(<span style=color:#a6e22e>namespace</span> <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Namespace</span> = <span style=color:#a6e22e>namespace</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h4 id=helmchart-v1alpha1>HelmChart v1alpha1</h4><p>Located in <code>pkg/stack/generators/helmchart.go</code>:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>generators</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fluxhelm</span> <span style=color:#e6db74>&#34;github.com/fluxcd/helm-controller/api/v2beta1&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Register</span>(<span style=color:#a6e22e>GVK</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Group</span>:   <span style=color:#e6db74>&#34;generators.gokure.dev&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Version</span>: <span style=color:#e6db74>&#34;v1alpha1&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Kind</span>:    <span style=color:#e6db74>&#34;HelmChart&#34;</span>,
</span></span><span style=display:flex><span>    }, <span style=color:#66d9ef>func</span>() <span style=color:#a6e22e>ApplicationConfig</span> { <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>HelmChartConfig</span>{} })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>HelmChartConfig</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Name</span>      <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Namespace</span> <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;namespace,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Helm-specific fields</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Chart</span>      <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;chart&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Version</span>    <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;version&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Repository</span> <span style=color:#66d9ef>string</span>                 <span style=color:#e6db74>`yaml:&#34;repository,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Values</span>     <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{} <span style=color:#e6db74>`yaml:&#34;values,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Advanced options</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>CreateNamespace</span> <span style=color:#66d9ef>bool</span>              <span style=color:#e6db74>`yaml:&#34;createNamespace,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Wait</span>            <span style=color:#66d9ef>bool</span>              <span style=color:#e6db74>`yaml:&#34;wait,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Timeout</span>         <span style=color:#66d9ef>string</span>            <span style=color:#e6db74>`yaml:&#34;timeout,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>DependsOn</span>       []<span style=color:#66d9ef>string</span>          <span style=color:#e6db74>`yaml:&#34;dependsOn,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>Generate</span>(<span style=color:#a6e22e>app</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Application</span>) ([]<span style=color:#f92672>*</span><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Object</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Generate HelmRelease for Flux or Application for ArgoCD</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// based on the workflow context</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Implement VersionedConfig</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>GetAPIVersion</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;generators.gokure.dev/v1alpha1&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>GetKind</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;HelmChart&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Implement NamedConfig and NamespacedConfig</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>GetName</span>() <span style=color:#66d9ef>string</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Name</span> }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>SetName</span>(<span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>) { <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Name</span> = <span style=color:#a6e22e>name</span> }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>GetNamespace</span>() <span style=color:#66d9ef>string</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Namespace</span> }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HelmChartConfig</span>) <span style=color:#a6e22e>SetNamespace</span>(<span style=color:#a6e22e>ns</span> <span style=color:#66d9ef>string</span>) { <span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Namespace</span> = <span style=color:#a6e22e>ns</span> }</span></span></code></pre></div><h2 id=configuration-examples>Configuration Examples</h2><h3 id=appworkload-configuration>AppWorkload Configuration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>generators.gokure.dev/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>AppWorkload</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>web-app</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>production</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>workload</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>container</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nginx:1.21</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>LoadBalancer</span></span></span></code></pre></div><h3 id=helmchart-configuration>HelmChart Configuration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>generators.gokure.dev/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>HelmChart</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>postgresql</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>database</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>chart</span>: <span style=color:#ae81ff>postgresql</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>12.0.0</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>repository</span>: <span style=color:#ae81ff>https://charts.bitnami.com/bitnami</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>values</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>auth</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>database</span>: <span style=color:#ae81ff>myapp</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>persistence</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>size</span>: <span style=color:#ae81ff>10Gi</span></span></span></code></pre></div><h3 id=kustomize-configuration>Kustomize Configuration</h3><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>generators.gokure.dev/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Kustomize</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>config-app</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>path</span>: <span style=color:#ae81ff>./overlays/production</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>prune</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>patches</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>target</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>app</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>patch</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        - op: replace
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          path: /spec/replicas
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          value: 5</span></span></span></code></pre></div><h2 id=version-evolution>Version Evolution</h2><h3 id=schema-versioning-strategy>Schema Versioning Strategy</h3><ol><li><strong>v1alpha1</strong>: Initial implementation, API may change</li><li><strong>v1beta1</strong>: API stabilizing, backward compatibility within beta</li><li><strong>v1</strong>: Stable API, backward compatibility guaranteed</li></ol><h3 id=version-migration>Version Migration</h3><p>When updating generator versions:</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Conversion interface for version upgrades</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Convertible</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ConvertTo</span>(<span style=color:#a6e22e>version</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>ApplicationConfig</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ConvertFrom</span>(<span style=color:#a6e22e>from</span> <span style=color:#a6e22e>ApplicationConfig</span>) <span style=color:#66d9ef>error</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Example: AppWorkloadConfig v1alpha1 to v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>AppWorkloadConfigV1Alpha1</span>) <span style=color:#a6e22e>ConvertTo</span>(<span style=color:#a6e22e>version</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>ApplicationConfig</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>version</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;v1beta1&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>AppWorkloadConfigV1Beta1</span>{
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Map fields from v1alpha1 to v1beta1</span>
</span></span><span style=display:flex><span>        }, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;unsupported version: %s&#34;</span>, <span style=color:#a6e22e>version</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h2 id=benefits>Benefits</h2><ol><li><strong>Version Management</strong>: Clear versioning strategy following Kubernetes conventions</li><li><strong>Type Discovery</strong>: Automatic detection of generator types from configuration</li><li><strong>API Evolution</strong>: Support for backward compatibility and migrations</li><li><strong>Extensibility</strong>: New generators can be added without modifying core code</li><li><strong>Validation</strong>: Type-specific validation at unmarshal time</li><li><strong>Tooling Support</strong>: GVK pattern enables better IDE support and schema validation</li></ol><h2 id=future-enhancements>Future Enhancements</h2><ol><li><strong>Schema Validation</strong>: OpenAPI schema generation for each GVK</li><li><strong>Webhook Validation</strong>: Admission webhooks for API validation</li><li><strong>CRD Generation</strong>: Generate CRDs for each ApplicationConfig type</li><li><strong>Conversion Webhooks</strong>: Automatic version conversion support</li><li><strong>Discovery API</strong>: Runtime discovery of available generator types</li></ol><h2 id=testing-strategy>Testing Strategy</h2><ol><li><strong>Unit Tests</strong>: Each generator implementation with its own test suite</li><li><strong>Integration Tests</strong>: Cross-generator workflow tests</li><li><strong>Version Migration Tests</strong>: Ensure conversions work correctly</li><li><strong>Registry Tests</strong>: Validate registration and factory patterns</li><li><strong>YAML Parsing Tests</strong>: Comprehensive unmarshal testing</li></ol><h2 id=migration-path>Migration Path</h2><p>Since the project is still in development with no releases:</p><ol><li><strong>Direct Migration</strong>: Update all existing configurations to use GVK format</li><li><strong>Update Examples</strong>: Modify demo and example code to use new format</li><li><strong>Generator Updates</strong>: Retrofit existing AppWorkloadConfig with GVK support</li><li><strong>Documentation</strong>: Update all documentation with new examples</li><li><strong>No Backward Compatibility</strong>: Clean break from old format</li></ol><h2 id=conclusion>Conclusion</h2><p>This design provides a robust, extensible system for managing multiple ApplicationConfig implementations with proper versioning and type detection. The GVK convention ensures compatibility with Kubernetes patterns and enables future API evolution.</p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a href=https://www.gokure.dev/ style=text-decoration:none><h1 style=margin:0;padding:1rem;color:var(--MENU-SECTIONS-ACTIVE-BG-color)>Go Kure</h1></a><div style="padding:0 1rem 1rem"><div style="background-color:rgba(255,193,7,.1);border:1px solid rgba(255,193,7,.3);border-radius:4px;padding:.75rem"><div style=display:flex;align-items:center;font-weight:700;color:#ffc107;margin-bottom:.25rem;font-size:.9rem><span style=margin-right:.5rem>‚ö†Ô∏è</span>
<span>Pre-Release</span></div><div style=font-size:.8rem;color:#ffeb3b;line-height:1.3>Unreleased software - APIs subject to change</div></div></div></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"><li data-nav-id=/index.html><a class=padding href=/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/overview/index.html><a class=padding href=/overview/index.html>Overview</a><ul id=R-subsections-0545e563276d3ac6e3218cfecf67a14b class=collapsible-menu></ul></li><li data-nav-id=/getting-started/index.html><a class=padding href=/getting-started/index.html>Getting Started</a><ul id=R-subsections-87c0363912f379e0725cbe1d504c985c class=collapsible-menu></ul></li><li data-nav-id=/architecture/index.html><a class=padding href=/architecture/index.html>Architecture</a><ul id=R-subsections-9e2fbae00589891720aedcdff0084e07 class=collapsible-menu></ul></li><li class=parent data-nav-id=/packages/index.html><a class=padding href=/packages/index.html>Packages</a><ul id=R-subsections-bdf1e8ce92aa8ff6883c617f10480430 class=collapsible-menu><li class=alwaysopen data-nav-id=/packages/launcher/index.html><a class=padding href=/packages/launcher/index.html>Launcher</a><ul id=R-subsections-9d3dfa62b00c459cf937434644ffeb15 class=collapsible-menu></ul></li><li class=alwaysopen data-nav-id=/packages/patch/index.html><a class=padding href=/packages/patch/index.html>Patch</a><ul id=R-subsections-7c547ca0c10cfe9e866a079fe02bd5a8 class=collapsible-menu></ul></li><li class="parent alwaysopen" data-nav-id=/packages/stack/index.html><a class=padding href=/packages/stack/index.html>Stack</a><ul id=R-subsections-02bd8df3d763850187342f84e596fe01 class=collapsible-menu><li data-nav-id=/packages/stack/design/index.html><a class=padding href=/packages/stack/design/index.html>Design</a></li><li class="parent alwaysopen" data-nav-id=/packages/stack/generators/index.html><a class=padding href=/packages/stack/generators/index.html>Generators</a><ul id=R-subsections-1a1d9b6365e2b30cbf8e233062d0c596 class=collapsible-menu><li class=active data-nav-id=/packages/stack/generators/design/index.html><a class=padding href=/packages/stack/generators/design/index.html>Design</a></li><li data-nav-id=/packages/stack/generators/architecture/index.html><a class=padding href=/packages/stack/generators/architecture/index.html>Architecture</a></li></ul></li><li data-nav-id=/packages/stack/status/index.html><a class=padding href=/packages/stack/status/index.html>Status</a></li></ul></li><li class=alwaysopen data-nav-id=/packages/layout/index.html><a class=padding href=/packages/layout/index.html>Layout</a><ul id=R-subsections-77c3a0c7a55ddc3d5c690813bfe4621c class=collapsible-menu></ul></li><li data-nav-id=/packages/io/index.html><a class=padding href=/packages/io/index.html>IO</a></li><li data-nav-id=/packages/errors/index.html><a class=padding href=/packages/errors/index.html>Errors</a></li><li data-nav-id=/packages/cli/index.html><a class=padding href=/packages/cli/index.html>CLI</a></li></ul></li><li data-nav-id=/examples/index.html><a class=padding href=/examples/index.html>Examples</a><ul id=R-subsections-2e4187ca04853a7e1382c8d86f7be6fd class=collapsible-menu></ul></li><li data-nav-id=/reference/index.html><a class=padding href=/reference/index.html>Reference</a><ul id=R-subsections-66002f201bef818664bb81aa67490c58 class=collapsible-menu></ul></li><li data-nav-id=/development/index.html><a class=padding href=/development/index.html>Development</a><ul id=R-subsections-54b0ce3c97b111c8cd4d107325fd580c class=collapsible-menu></ul></li><li data-nav-id=/changelog/index.html><a class=padding href=/changelog/index.html>Changelog</a><ul id=R-subsections-d1977150cf385e06b32490e43a8e612b class=collapsible-menu></ul></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul></ul></div><div id=R-footer><div style="position:sticky;bottom:0;padding:1rem;margin-top:2rem;background-color:rgba(255,193,7,.1);border:1px solid rgba(255,193,7,.3);border-top:3px solid #ffc107"><div style=display:flex;align-items:center;font-weight:700;color:#ffc107;margin-bottom:.5rem><span style=margin-right:.5rem>‚ö†Ô∏è</span>
<span>Pre-Release Software</span></div><div style=font-size:.875rem;color:#ffeb3b;line-height:1.4>This documentation is for unreleased software. Features and APIs may change before the official release.</div></div></div></div></aside><script src=/js/clipboard/clipboard.min.js?1770906066 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1770906066 defer></script><script src=/js/theme.min.js?1770906066 defer></script></body></html>